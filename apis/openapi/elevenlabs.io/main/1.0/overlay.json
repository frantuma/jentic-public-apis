{
  "overlay": "1.0.0",
  "info": {
    "title": "Overlay for Elevenlabs OpenAPI Document",
    "version": "1.0.0"
  },
  "actions": [
    {
      "target": "$.servers[?@.url=='https://api.elevenlabs.io']",
      "description": "Remove server to avoid duplicate",
      "remove": true
    },
    {
      "target": "$",
      "description": "Add server",
      "update": {
        "servers": [
          {
            "url": "https://api.elevenlabs.io"
          }
        ]
      }
    },
    {
      "target": "$.components",
      "description": "Add ApiKeyAuth security scheme under components.",
      "update": {
        "securitySchemes": {
          "ApiKeyAuth": {
            "type": "apiKey",
            "in": "header",
            "name": "xi-api-key"
          }
        }
      }
    },
    {
      "target": "$",
      "description": "Set top-level security requirement to use ApiKeyAuth.",
      "update": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ]
      }
    },
    {
      "target": "$['paths']['/v1/convai/agents/{agent_id}/add-to-knowledge-base']['post']['parameters'][?@.name=='agent_id']",
      "description": "Remove required path parameter agent_id from parameters array.",
      "remove": true
    },
    {
      "target": "$['paths']['/v1/convai/agents/{agent_id}/add-to-knowledge-base']['post']",
      "description": "Append required path parameter agent_id to parameters array.",
      "update": {
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "The id of the agent you're taking the action on.",
              "examples": [
                "21m00Tcm4TlvDq8ikWAM"
              ],
              "title": "Agent Id"
            },
            "description": "The id of the agent you're taking the action on."
          }
        ]
      }
    },
    {
      "target": "$['paths']['/v1/convai/agents/{agent_id}/knowledge-base/{documentation_id}']['get']['parameters'][?@.name=='agent_id']",
      "description": "Remove required path parameter agent_id from parameters array.",
      "remove": true
    },
    {
      "target": "$['paths']['/v1/convai/agents/{agent_id}/knowledge-base/{documentation_id}']['get']",
      "description": "Append required path parameter agent_id to parameters array.",
      "update": {
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "The id of the agent you're taking the action on.",
              "examples": [
                "21m00Tcm4TlvDq8ikWAM"
              ],
              "title": "Agent Id"
            },
            "description": "The id of the agent you're taking the action on."
          }
        ]
      }
    },
    {
      "target": "$['paths']['/v1/history/download']['post']['responses']['200']['content']['application/zip']",
      "description": "Description field not supported on MediaType Object",
      "remove": true
    },
    {
      "target": "$['paths']['/v1/history/download']['post']['responses']['200']['content']",
      "description": "Description field not supported on MediaType Object",
      "update": {
        "application/zip": {
          "schema": {
            "type": "string",
            "format": "binary"
          }
        }
      }
    }
  ]
}